import{w as M}from"./index.f49621fc.js";import{am as b}from"./index.1ac6013c.js";const I={message:"Missing Toast Message",autohide:!0,timeout:5e3};function P(){const e=Math.random();return Number(e).toString(32)}function h(e){if(e.autohide===!0)return setTimeout(()=>{L.close(e.id)},e.timeout)}function U(){const{subscribe:e,set:o,update:r}=M([]);return{subscribe:e,trigger:t=>{const s=P();return r(n=>{t&&t.callback&&t.callback({id:s,status:"queued"}),t.hideDismiss&&(t.autohide=!0);const a={...I,...t,id:s};return a.timeoutId=h(a),n.push(a),n}),s},close:t=>r(s=>{if(s.length>0){const n=s.findIndex(i=>i.id===t),a=s[n];a&&(a.callback&&a.callback({id:t,status:"closed"}),a.timeoutId&&clearTimeout(a.timeoutId),s.splice(n,1))}return s}),freeze:t=>r(s=>(s.length>0&&clearTimeout(s[t].timeoutId),s)),unfreeze:t=>r(s=>(s.length>0&&(s[t].timeoutId=h(s[t])),s)),clear:()=>o([])}}const L=U(),u={};function w(e){return e==="local"?localStorage:sessionStorage}function m(e,o,r){const t=(r==null?void 0:r.serializer)??JSON,s=(r==null?void 0:r.storage)??"local";function n(a,i){w(s).setItem(a,t.stringify(i))}if(!u[e]){const a=M(o,c=>{const l=w(s).getItem(e);l&&c(t.parse(l));{const g=d=>{d.key===e&&c(d.newValue?t.parse(d.newValue):null)};return window.addEventListener("storage",g),()=>window.removeEventListener("storage",g)}}),{subscribe:i,set:f}=a;u[e]={set(c){n(e,c),f(c)},update(c){const l=c(b(a));n(e,l),f(l)},subscribe:i}}return u[e]}const _=m("modeOsPrefers",!1),p=m("modeUserPrefers",void 0),v=m("modeCurrent",!1);function T(){const e=window.matchMedia("(prefers-color-scheme: light)").matches;return _.set(e),e}function E(e){p.set(e)}function k(e){const o=document.documentElement.classList,r="dark";e===!0?o.remove(r):o.add(r),v.set(e)}function z(){const e=document.documentElement.classList,o=localStorage.getItem("modeUserPrefers")==="false",r=!("modeUserPrefers"in localStorage),t=window.matchMedia("(prefers-color-scheme: dark)").matches;o||r&&t?e.add("dark"):e.remove("dark")}export{k as a,E as b,T as g,m as l,v as m,z as s,L as t};
